e<div class="content-section stressv">
    <p-toast position="top-right"></p-toast>
    <div class="">
        <p-table [value]="sectors" styleClass="stressv p-datatable-gridlines" dataKey="name" editMode="row">
            <ng-template pTemplate="header">
                <tr>
                    <th colspan="6">
                        <span style="position: absolute;left: 0;right: 0;">{{title}}</span>
                        <span class="float-right">Amount in Crores</span>
                    </th>
                </tr>
                <tr>
                    <th class="text-center Sectorname" [class]="Sectorname">{{Sectorname}}</th>
                    <th class="headers">FY {{currentFY-1}}- {{currentFY}}</th>
                    <th class="headers" *ngFor="let qt of quarters">{{qt}}</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-sector let-editing="editing" let-ri="rowIndex">
                <tr [pEditableRow]="sector" [class]="sector.title" [ngClass]="{'disabled':sector.title=='blank'}">
                    <td class="text-red text-left text-bold text-1em bg-white" [class]="sector.title">{{sector.title}}
                    </td>
                    <ng-container *ngIf="sector.name != 'blank' && sector.name !='total'">
                        <ng-container *ngFor="let i of arrayOf(5);let index=index">
                            <ng-container *ngIf="index==0">
                                <td>{{findData(sector.name,index)|number}}</td>
                            </ng-container>
                            <ng-container *ngIf="index>0">
                                <ng-container *ngIf="isEditable(data[sector.name],index)">
                                    <td pEditableColumn class="Q1 bg-white">
                                        <p-cellEditor>
                                            <ng-template pTemplate="input">
                                                <input pInputText type="number"
                                                    [(ngModel)]="data[sector.name]['Q'+index]['amount']">
                                            </ng-template>
                                            <ng-template pTemplate="output">
                                                {{data[sector.name]['Q'+index]['amount']}}
                                            </ng-template>
                                        </p-cellEditor>
                                    </td>
                                </ng-container>
                                <!-- <ng-container *ngIf="isEditable(data[sector.name],2)">
                                    <td pEditableColumn class="Q2">
                                        <p-cellEditor>
                                            <ng-template pTemplate="input">
                                                <input pInputText type="number"
                                                    [(ngModel)]="data[sector.name]['Q2']['amount']">
                                            </ng-template>
                                            <ng-template pTemplate="output">
                                                {{data[sector.name]['Q2']['amount']}}
                                            </ng-template>
                                        </p-cellEditor>
                                    </td>
                                </ng-container>
                                <ng-container *ngIf="isEditable(data[sector.name],3)">
                                    <td pEditableColumn class="Q3">
                                        <p-cellEditor>
                                            <ng-template pTemplate="input">
                                                <input pInputText type="number"
                                                    [(ngModel)]="data[sector.name]['Q3']['amount']">
                                            </ng-template>
                                            <ng-template pTemplate="output">
                                                {{data[sector.name]['Q3']['amount']}}
                                            </ng-template>
                                        </p-cellEditor>
                                    </td>
                                </ng-container>
                                <ng-container *ngIf="isEditable(data[sector.name],4)">
                                    <td pEditableColumn class="'Q4'">
                                        <p-cellEditor>
                                            <ng-template pTemplate="input">
                                                <input pInputText type="number"
                                                    [(ngModel)]="data[sector.name]['Q4']['amount']">
                                            </ng-template>
                                            <ng-template pTemplate="output">
                                                {{data[sector.name]['Q4']['amount']}}
                                            </ng-template>
                                        </p-cellEditor>
                                    </td>
                                </ng-container> -->
                                <ng-container *ngIf="!isEditable(data[sector.name],index)">
                                    <td>
                                        {{data[sector.name]['Q'+index]['amount']}}
                                    </td>
                                </ng-container>
                            </ng-container>
                        </ng-container>
                    </ng-container>
                    <ng-container *ngIf="sector.name == 'total'">
                        <td *ngFor="let i of arrayOf(5);let index=index">{{findSum(index)}}</td>
                    </ng-container>
                    <ng-container *ngIf="sector.name == 'blank'">
                        <td class="blank" *ngFor="let i of arrayOf(5);let index=index"></td>
                    </ng-container>
                </tr>
            </ng-template>

        </p-table>
        <div class="text-center mt-2 mb-2 pt-2">
            <button pButton icon="pi pi-check" (click)="save()" label="Save"
                class="p-button-primary mr-2"></button>
            <button pButton type="button" (click)="post()" icon="pi pi-upload" label="Submit"
                class=" ml-2 p-button-success"></button>
        </div>
    </div>
</div>

<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>
